<project name="PSD4 Validate Test" default="help" basedir=".">

  <property name="schema.original" location="PDS4_PDS_1000.xsd" />
  <property name="schema.stripped" location="PDS4_PDS_1000-stripped.xsd" />
  
  <target name="help">
    <echo>Use "ant -projecthelp" to show available targets.</echo>
  </target>

  <target name="compile" depends="strip" description="Generates objects from the schema classes.">
    <delete dir="generated" quiet="true" />
    <mkdir dir="generated" />
    <exec executable="xjc">
      <arg value="-extension" />
      <arg value="-d" />
      <arg value="generated" />
      <arg value="-p" />
      <arg value="gov.nasa.arc.pds.xml.generated" />
      <arg value="-b" />
      <arg value="bindings.xjb" />
      <arg value="${schema.stripped}" />
    </exec>
    <echo>Generated Java source files are in the generated/ directory.</echo>
  </target>
  
  <target name="strip">
    <xslt in="${schema.original}" out="${schema.stripped}" style="xsd2to1.xsl" />
  </target>

  <target name="javadoc" description="Generates Javadocs. Run 'compile' first.">
    <javadoc destdir="docs/api">
      <fileset dir="generated" />
    </javadoc>
    <echo>Javadoc main page is in docs/api/index.html.</echo>
  </target>

  <target name="clean" description="Removes all generated files and documentation.">
    <delete dir="generated" quiet="true" />
    <delete dir="docs" quiet="true" />
    <delete file="${schema.stripped}" quiet="true" />
  </target>

</project>

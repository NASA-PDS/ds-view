<?xml version="1.0" encoding="UTF-8"?>

<!--
  Copyright 2017-2018, by the California Institute of Technology.
  ALL RIGHTS RESERVED. United States Government Sponsorship acknowledged.
  Any commercial use must be negotiated with the Office of Technology Transfer
  at the California Institute of Technology.

  This software is subject to U. S. export control laws and regulations
  (22 C.F.R. 120-130 and 15 C.F.R. 730-774). To the extent that the software
  is subject to U.S. export control laws and regulations, the recipient has
  the responsibility to obtain export licenses or other export authority as
  may be required before exporting such information to foreign countries or
  providing access to foreign nationals.

  $Id$
-->

<document>
  <properties>
    <title>Operation</title>
    <author email="Sean.Hardman@jpl.nasa.gov">Sean Hardman</author>
  </properties>

  <body>
    <section name="Operation">
      <p>The Tools Service offers access to both the Transform Tool and the Validate Tool via the PDS Tools Service or the WRP Tools Service applications.
      </p>

      <ul>
        <li><a href="#Transform_Tool_Service">Transform Tool Service</a></li>
        <li><a href="#Validate_Tool_Service">Validate Tool Service</a></li>
      </ul>
    </section>
    
    <section name="Transform Tool Service">
      <p>The Transform Tool Service is accessed via the PDS Tools Service which interfaces with WRP Tools Service to perform the transformations. The main screen of the application is as follows:
      </p>
      
      <a href="../images/transform_ts1.png" target="_blank"><img alt="Transform Tools Service Screen Shot" src="../images/transform_ts1_scale.png" border="1" /></a><br/>
        Click on the image for a larger version.
      <br/><br/><br/>
           
      <ol>
        <li>Click 'Browse...' button to choose file(s).</li>
        <li>Click 'Upload File(s)' button to upload file(s).</li>
        <li>Click 'Continue' button.</li>
      </ol> 
      <a href="../images/transform_ts2.png" target="_blank"><img alt="Before transforming" src="../images/transform_ts2_scale.png" border="1" /></a><br/>
        Click on the image for a larger version.
      <br/><br/><br/>
      
      <ol>
        <li>Choose a format to transform from the format list.</li>
        <li>Choose a check box of 'List Objects' if needed.</li>
        <li>Click 'Transform' button.</li>
      </ol>
      <a href="../images/transform_ts3.png" target="_blank"><img alt="After transforming" src="../images/transform_ts3_scale.png" border="1" /></a><br/>
        Click on the image for a larger version.
      <br/><br/><br/>
      
      <p>Click a link 'Download' from the result page to download a transformed product.</p>
      <a href="../images/transform_ts4.png" target="_blank"><img alt="After transforming" src="../images/transform_ts4_scale.png" border="1" /></a><br/>
        Click on the image for a larger version.
      <br/><br/><br/>
    </section>
    
    <section name="Validate Tool Service">
      <p>The Validate Tool Service software will eventually be a part of the PDS Tools Service which interfaces with the WRP Tools Service. In this release though, the Validate Tool can be called directly from the WRP Tools Service with REST-based request. The following is an example of validating a URL-referenced product via the service:</p>

      <p>
http://localhost:8080/ts/validate?target="https://starbase.jpl.nasa.gov/pds4/1700/dph_example_archive_VG2PLS/data/ele_mom_tblChar.xml"&amp;options=f
      </p>

      <p>The above command returns the results in JSON format:
      </p>

      <p>
{"application":"validate-1.13.0","result":{"stdout":"{\n  \"title\": \"PDS Validation Tool Report\",\n  \"configuration\": {\n    \"version\": \"1.13.0\",\n    \"date\": \"2018-04-23T22:53:25Z\"\n  },\n  \"parameters\": {\n    \"targets\": \"[https://starbase.jpl.nasa.gov/pds4/1700/dph_example_archive_VG2PLS/data/ele_mom_tblChar.xml]\",\n    \"severityLevel\": \"WARNING\",\n    \"recurseDirectories\": \"true\",\n    \"fileFiltersUsed\": \"[*.xml, *.XML]\",\n    \"forceMode\": \"on\",\n    \"dataContentValidation\": \"on\"\n  },\n  \"productLevelValidationResults\": [\n    {\n      \"status\": \"PASS\",\n      \"label\": \"https://starbase.jpl.nasa.gov/pds4/1700/dph_example_archive_VG2PLS/data/ele_mom_tblChar.xml\",\n      \"messages\": [],\n      \"fragments\": [],\n      \"dataContents\": []\n    }\n  ],\n  \"summary\": {\n    \"totalErrors\": 0,\n    \"totalWarnings\": 0\n  }\n}","rv":0,"success":true,"stderr":"","hash":"43efe3bb2d29203da55093a6d095776f"},"error":{"type":"n/a","message":""},"input":{"keyed":{"target":"\"https://starbase.jpl.nasa.gov/pds4/1700/dph_example_archive_VG2PLS/data/ele_mom_tblChar.xml\"","options":"f"}},"method":"GET","ts":{"application":"wrp-tools-service","version":"pdseng"}}
      </p>
    </section>
  </body>
</document>

<?xml version="1.0" encoding="UTF-8"?>

<!--
  Copyright 2010, by the California Institute of Technology.
  ALL RIGHTS RESERVED. United States Government Sponsorship acknowledged.
  Any commercial use must be negotiated with the Office of Technology Transfer
  at the California Institute of Technology.

  This software is subject to U. S. export control laws and regulations
  (22 C.F.R. 120-130 and 15 C.F.R. 730-774). To the extent that the software
  is subject to U.S. export control laws and regulations, the recipient has
  the responsibility to obtain export licenses or other export authority as
  may be required before exporting such information to foreign countries or
  providing access to foreign nationals.

  $Id$
-->

<document>
  <properties>
    <title>Policy Agent Installation</title>
    <author email="Hyun.Lee@jpl.nasa.gov">Hyun Lee</author>
    <author email="Sean.Hardman@jpl.nasa.gov">Sean Hardman</author>
  </properties>

  <body>
    <section name="Policy Agent Installation">
      <p>This section details an example installation of the J2EE Policy Agent for Apache Tomcat. The following properties pertain to this example installation:
      </p>

      <ul>
        <li>OpenAM URL: http://pdsops.jpl.nasa.gov:80/openam</li>
        <li>Agent URL: http://pdsops2.jpl.nasa.gov:80/registry-service/registry</li>
        <li>Agent Profile name: Tomcat6AgentProfile</li>
        <li>Agent Profile password filename: /usr/local/j2ee_agents/tomcat6agentpw</li>
      </ul>

      <source>
% ./agentadmin --install
Do you completely agree with all the terms and conditions of this License
Agreement (yes/no): [no]: yes


************************************************************************
Welcome to the OpenSSO Policy Agent for Apache Tomcat 6.0 Servlet/JSP
Container
 
************************************************************************


Enter the complete path to the directory which is used by Tomcat Server to
store its configuration Files. This directory uniquely identifies the
Tomcat Server instance that is secured by this Agent.
[ ? : Help, ! : Exit ]
Enter the Tomcat Server Config Directory Path
[/opt/apache-tomcat-6.0.14/conf]: /usr/local/tomcat6/conf
 
 
Enter the URL where the OpenSSO server is running. Please include the
deployment URI also as shown below:
(http://opensso.sample.com:58080/opensso)
[ ? : Help, &lt; : Back, ! : Exit ]
OpenSSO server URL: http://pdsops.jpl.nasa.gov:80/openam
 
 
$CATALINA_HOME environment variable is the root of the tomcat
installation.
[ ? : Help, &lt; : Back, ! : Exit ]
Enter the $CATALINA_HOME environment variable: /usr/local/tomcat6
 
 
Choose yes to deploy the policy agent in the global web.xml file.
[ ? : Help, &lt; : Back, ! : Exit ]
Install agent filter in global web.xml ? [true]: 
 
 
Enter the Agent URL. Please include the deployment URI also as shown below:
(http://agent1.sample.com:1234/agentapp)
[ ? : Help, &lt; : Back, ! : Exit ]
Agent URL: http://pdsops2.jpl.nasa.gov:80/registry-service/registry
 
 
Enter the Agent profile name
[ ? : Help, &lt; : Back, ! : Exit ]
Enter the Agent Profile name: Tomcat6AgentProfile
 
 
Enter the path to a file that contains the password to be used for identifying
the Agent.
[ ? : Help, &lt; : Back, ! : Exit ]
Enter the path to the password file: /usr/local/j2ee_agents/tomcat6agentpw    
 
 
-----------------------------------------------
SUMMARY OF YOUR RESPONSES
-----------------------------------------------
Tomcat Server Config Directory : /usr/local/tomcat6/conf 
OpenSSO server URL : http://pdsops.jpl.nasa.gov:80/openam 
$CATALINA_HOME environment variable : /usr/local/tomcat6 
Tomcat global web.xml filter install : true 
Agent URL :
http://pdsops2.jpl.nasa.gov:80/registry-service/registry 
Agent Profile name : Tomcat6AgentProfile 
Agent Profile Password file name :
/usr/local/j2ee_agents/tomcat6agentpw 
 
Verify your settings above and decide from the choices below.
1. Continue with Installation
2. Back to the last interaction
3. Start Over
4. Exit
Please make your selection [1]: 
 
Updating the /apps/apache-tomcat-6.0.26/bin/setclasspath.sh script
with the Agent classpath ...DONE.
 
Creating directory layout and configuring Agent file for Agent_001
instance ...DONE.
 
Reading data from file /apps/j2ee_agents/tomcat6agentpw and encrypting
it ...DONE.
 
Generating audit log file name ...DONE.
 
Creating tag swapped OpenSSOAgentBootstrap.properties file for instance
Agent_001 ...DONE.
 
Creating a backup for file /usr/local/tomcat6/conf/server.xml ...DONE.
 
Creating a backup for file /usr/local/tomcat6/conf/web.xml ...DONE.
 
Adding OpenSSO Tomcat Agent Realm to Server XML file :
/usr/local/tomcat6/conf/server.xml ...DONE.
 
Adding filter to Global deployment descriptor file :
/usr/local/tomcat6/conf/web.xml ...DONE.
 
Adding OpenSSO Tomcat Agent Filter and Form login authentication to
selected Web applications ...DONE.
 
 
SUMMARY OF AGENT INSTALLATION
-----------------------------
Agent instance name: Agent_001
Agent Bootstrap file location:
/apps/j2ee_agents/tomcat_v6_agent/Agent_001/config \
/OpenSSOAgentBootstrap.properties
Agent Configuration file location
/apps/j2ee_agents/tomcat_v6_agent/Agent_001/config \
/OpenSSOAgentConfiguration.properties
Agent Audit directory location:
/apps/j2ee_agents/tomcat_v6_agent/Agent_001/logs/audit
Agent Debug directory location:
/apps/j2ee_agents/tomcat_v6_agent/Agent_001/logs/debug
 
 
Install log file location:
/apps/j2ee_agents/tomcat_v6_agent/installer-logs/audit/install.log
 
Thank you for using OpenSSO Policy Agent
 
[root@pdsops2 j2ee_agents]#
      </source>
    </section>
  </body>
</document>
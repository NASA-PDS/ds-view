<?xml version="1.0" encoding="UTF-8"?>

<!--
  Copyright 2010, by the California Institute of Technology.
  ALL RIGHTS RESERVED. United States Government Sponsorship acknowledged.
  Any commercial use must be negotiated with the Office of Technology Transfer
  at the California Institute of Technology.

  This software is subject to U. S. export control laws and regulations
  (22 C.F.R. 120-130 and 15 C.F.R. 730-774). To the extent that the software
  is subject to U.S. export control laws and regulations, the recipient has
  the responsibility to obtain export licenses or other export authority as
  may be required before exporting such information to foreign countries or
  providing access to foreign nationals.

  $Id$
-->

<document>
  <properties>
    <title>Scheme and Node Registration</title>
    <author email="Paul.Ramirez@jpl.nasa.gov">Paul Ramirez</author>
    <author email="Sean.Hardman@jpl.nasa.gov">Sean Hardman</author>
  </properties>

  <body>
    <section name="Scheme and Node Registration">
      <p>This section describes classification scheme and classification node registration in more detail. At this point in time, only one classification scheme is supported by the Registry Service and that is the ObjectType scheme. This scheme is utilized by the service for determining the allowable object types (artifacts) for registration. These object types are represented by the classification nodes, which are children of the ObjectType classification scheme.
      </p>

      <p>The standard scheme and associated nodes are registered during the installation of the service. That procedure is detailed in the <a href="../install/index.html#Configuration">Configuration</a> portion of the Installation section. The rest of this section gives a little insight into the content of the scheme and node descriptions and how they are registered with the service. The following is an example of a scheme description in XML form:
      </p>

      <source>
&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;classificationScheme xmlns="http://registry.pds.nasa.gov" 
  guid="urn:registry:classificationScheme:ObjectTypeScheme:Test"
  name="TestObjectType" 
  description="This is the canonical object type classification 
  that is one of the core registry objects"
  isInternal="true"
  nodeType="UniqueCode"/&gt;
      </source>

      <p>The scheme description above is contained in the <i>new_scheme.xml</i> file, which can be found in the <i>/examples</i> directory of the software distribution package. The following command registers this scheme with the service:
      </p>

      <source>
% curl -X POST -H "Content-type:application/xml" -v -d @new_scheme.xml \
http://localhost:8080/registry-service/registry/schemes
      </source>

      <p>The following is an example of a node description in XML form:
      </p>

      <source>
&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;classificationNode xmlns="http://registry.pds.nasa.gov" 
  guid="urn:nasa:pds:profile:regrep:ObjectType:ProductTest"
  lid="urn:nasa:pds:profile:regrep:ObjectType:ProductTest"
  name="Product Test Node" 
  description="This is the classification node for testing."
  parent="urn:registry:classificationScheme:ObjectTypeScheme:Test"
  code="ProductTest"/&gt;
      </source>

      <p>The node description above is contained in the <i>new_node_product.xml</i> file. The following command registers this node with the service:
      </p>

      <source>
% curl -X POST -H "Content-type:application/xml" -v -d @new_node_product.xml \
http://localhost:8080/registry-service/registry/schemes/urn:registry:ObjectTypeScheme/nodes
      </source>
    </section>
  </body>
</document>

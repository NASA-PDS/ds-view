<?xml version="1.0" encoding="UTF-8"?>

<!--
  Copyright 2014, by the California Institute of Technology.
  ALL RIGHTS RESERVED. United States Government Sponsorship acknowledged.
  Any commercial use must be negotiated with the Office of Technology Transfer
  at the California Institute of Technology.

  This software is subject to U. S. export control laws and regulations
  (22 C.F.R. 120-130 and 15 C.F.R. 730-774). To the extent that the software
  is subject to U.S. export control laws and regulations, the recipient has
  the responsibility to obtain export licenses or other export authority as
  may be required before exporting such information to foreign countries or
  providing access to foreign nationals.

  $Id$
-->

<document>
  <properties>
    <title>Delete Existing Database</title>
    <author email="Sean.Hardman@jpl.nasa.gov">Sean Hardman</author>
  </properties>

  <body>
    <section name="Delete Existing Database">
      <p>If the existing databases do not need to be retained for the upgraded installation, then they can be deleted. Prior to deleting the databases, shutdown the Tomcat server. The following is a set of instructions for deleting the databases that are dependent on the database server used in the current environment. Once the databases have been deleted, see the <a href="index.html#Deploying_the_Databases">Deploying the Databases</a> section for instructions on how to create the new databases.
      </p>

      <subsection name="Derby">
        <p>For a Derby database instance, execute the following to delete the database (the path was specified in the <a href="#Database_Configuration">Configuration</a> section):
        </p>

        <source>
% cd /path/to/registrydb/home
% rm -rf registrypds3 registrypds4 derby.log
        </source>
      </subsection>

      <subsection name="MySQL">
        <p>For a MySQL database instance, execute the following to delete the database from the database server: 
        </p>

        <source>
% mysqladmin -u root -p drop registrypds3
% mysqladmin -u root -p drop registrypds4
        </source>
      </subsection>

      <subsection name="PostgreSQL">
        <p>For a PostgreSQL database instance, execute the following to delete the database from the database server: 
        </p>

        <source>
% psql -U postgres
postgres=# drop database registrypds3
postgres=# drop database registrypds4
postgres=# \q
        </source>
      </subsection>
    </section>
  </body>
</document>
